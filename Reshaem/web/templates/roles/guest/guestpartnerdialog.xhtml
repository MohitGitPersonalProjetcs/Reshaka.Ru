<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <head>
        <title>TODO supply a title</title>
    </head>
    <body>
        <ui:composition>
            <p:dialog header="Хочу тоже решать задачи! Заявка. " id="partner_dialog" widgetVar="guest_partner_dlg" width="650" position="top">
                <h:form>
                    <p:panel>
<!--                        <h:panelGrid columns="1" >-->
                            <h:panelGrid columns="2" width="100%;">
                                <h:outputText style="color: red;" value="Email* :" />
                                <p:inputText value="#{requestBean.email}" />

                                <h:outputText value="Ваше имя:" />
                                <p:inputText value="#{requestBean.name}" />

                                <h:outputText value="Возраст :" />
                                <p:inputText value="#{requestBean.age}" />

                                <h:outputText value="Образование:" />
                                <p:inputText value="#{requestBean.education}" />

                                <h:outputText value="Город проживания:" />
                                <p:inputText value="#{requestBean.city}" />

                                <h:outputText value="Опыт работы:" />
                                <p:inputText value="#{requestBean.experience}" />

                            </h:panelGrid>

        
<!--                        </h:panelGrid>-->

                        <h:outputText value="Несколько слов о себе" />
                        <br/>
                        <h:panelGroup>
                            <p:inputTextarea id="ab_me" value="#{requestBean.additionalInfo}" style="width: 100%;" />
                            <p:watermark for="ab_me" value="Например: 'Я, Вася Пупкин, хорошо решаю задачи по математике и физике.' "/>
                        </h:panelGroup>
                        <br/>
                        <h:outputText value="Дополнительные контакты" />
                        <br/>
                        <h:panelGroup>
                            <p:inputTextarea id="dop_me" value="#{requestBean.additionalContacts}" style="width: 100%;" />
                            <p:watermark for="dop_me" value="Например: 'Мне более привычно общаться в контакте: vk.com/vasya.pupkin ' "/>
                        </h:panelGroup>
                    </p:panel>
                    <div style="float: right; margin: 10px;">
                        <h:panelGrid columns="2">
                            <p:commandButton value="Отправить заявку"  update=":growl"
                                         oncomplete="handleReshakaRequest(xhr, status, args)"
                                         actionListener="#{requestBean.addNewRequest()}"
                                         />
                        <h:link onclick="partner_dlg.hide();" value="Отмена"/>
                        </h:panelGrid>
                    </div>
                </h:form>
            </p:dialog>

            <script type="text/javascript">  
                function handleReshakaRequest(xhr, status, args) {  
                    if(args.validationFailed || !args.partner) {  
                        //do something if auth failed
                        jQuery('#registration_dialog').effect("shake", { times:3 }, 100);
                    } else {  
                        guest_partner_dlg.hide();
                        //dlg_register.hide();
//                        logInButtonClicked();
                    }  
                }  
            </script>

        </ui:composition>
    </body>
</html>
